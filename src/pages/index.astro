---
import Layout from "../layouts/Layout.astro";
import {
	Pickle,
	Behzisti,
	Discord,
	Cat,
	Guitar,
	Instagram,
	Twitch,
	Youtube,
	CodeIcon,
	Volume,
} from "../components/icons";
---

<Layout title="Dot Dager">
	<header class="fixed top-0 w-dvw text-xl p-2 z-20 font-bold">
		<nav>
			<ul class="flex justify-center gap-3">
				<li><a class="hover:underline" href="#">Home</a></li>
				<li><a class="hover:underline" href="#loves">Loves</a></li>
				<li>
					<a class="hover:underline" href="#latestVideos">Videos</a>
				</li>
				<button id="playAudio" class="rounded-md p-1 border">
					<Volume className="w-6" muted />
					<Volume className="w-6 hidden" />
				</button>
			</ul>
		</nav>
	</header>
	<main class="">
		<section
			id="home"
			class="px-4 pb-2 md:px-40 pt-16 relative min-h-screen bg-[url('/assets/bg.jpg')] bg-cover bg-right bg-no-repeat flex flex-col justify-center gap-4"
		>
			<div
				id="bgcut"
				class="absolute inset-0 bg-black/60 backdrop-blur-sm z-0"
			>
			</div>

			<div
				id="bg-front"
				class="absolute inset-0 bg-[url('/assets/bg-cut.png')] bg-cover bg-right bg-no-repeat"
			>
			</div>
			<div
				class="relative z-10 border rounded-md space-y-3 max-w-[600px] p-3"
			>
				<h1 class="font-bold text-4xl">Dot Dager</h1>
				<h2 class="font-bold text-2xl">
					Content Creator & Digital Explorer
				</h2>
				<p>
					Hey there! I'm a content creator with a passion for bringing
					ideas to life. When I'm not crafting content, you'll find me
					diving into code, jamming on my guitar, or contemplating
					life's big questions (usually with my cat and a pickle in
					hand).
				</p>
				<h2 class="font-bold text-2xl">Social</h2>
				<ul class="flex gap-3">
					<li>
						<a
							href="https://www.youtube.com/@dotdager"
							rel="noopener noreferrer"
							target="_blank"
							><Youtube className="w-10 hover:text-red-500" /></a
						>
					</li>
					<li>
						<a
							href="https://discord.com/invite/4NFk6TamAB"
							rel="noopener noreferrer"
							target="_blank"
							><Discord className="w-10 hover:text-blue-500" /></a
						>
					</li>
					<li>
						<a
							href="https://www.instagram.com/dager.32"
							rel="noopener noreferrer"
							target="_blank"
							><Instagram
								className="w-10 hover:text-pink-500"
							/></a
						>
					</li>
					<li>
						<a
							href="https://www.twitch.tv/dagerxiv"
							rel="noopener noreferrer"
							target="_blank"
							><Twitch
								className="w-10 hover:text-purple-500"
							/></a
						>
					</li>
				</ul>
			</div>
			<div id="loves" class="relative flex w-100 justify-center">
				<div class="border rounded-md p-3 space-y-3 bg-black/35 w-full">
					<h2 class="font-bold text-2xl text-center">
						I Love all of this
					</h2>
					<div class="flex flex-wrap justify-center gap-5">
						<div
							class="w-24 text-center flex flex-col justify-center items-center"
						>
							<CodeIcon className="w-10" />
							<h3 class="font-bold">Programming</h3>
							<p class="text-sm">
								Building digital experiences that matter
							</p>
						</div>
						<div
							class="w-24 text-center flex flex-col justify-center items-center"
						>
							<Cat className="w-10" />
							<h3 class="font-bold">Cats</h3>
							<p class="text-sm">
								My feline friends who keep me company
							</p>
						</div>
						<div
							class="w-24 text-center flex flex-col justify-center items-center"
						>
							<Guitar className="w-10" />
							<h3 class="font-bold">Guitar</h3>
							<p class="text-sm">
								Creating melodies in my free time
							</p>
						</div>
						<div
							class="w-24 text-center flex flex-col justify-center items-center"
						>
							<Behzisti className="w-10" />
							<h3 class="font-bold">Philosophy</h3>
							<p class="text-sm">
								Exploring life's deeper questions
							</p>
						</div>
						<div
							class="w-24 text-center flex flex-col justify-center items-center"
						>
							<Pickle className="w-10" />
							<h3 class="font-bold">Pickles</h3>
							<p class="text-sm">
								Can't code without my favorite snack
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section id="latestVideos" class="p-4 space-y-3">
			<div class="grid grid-cols-1 gap-3 md:grid-rows-1 md:grid-cols-7">
				<div
					id="youtubeChannel"
					class="border p-2 rounded-md flex justify-center items-center hover:bg-black/30 group"
				>
					<a
						href="https://www.youtube.com/@dotdager"
						class="space-y-3 flex flex-col text-center w-full justify-center items-center rounded-md"
						rel="noopener noreferrer"
						target="_blank"
					>
						<h3 class="font-bold">YouTube</h3>
						<img
							src="assets/youtubechannel.png"
							alt=""
							srcset=""
							class="rounded-full w-20 h-20"
						/>
						<h3 class="font-bold">@DotDager</h3>
						<Youtube
							className="absolute w-14 hidden group-hover:block text-red-500/50"
						/>
					</a>
				</div>
				<div
					id="youtubeVideos"
					class="md:col-span-6 flex flex-col md:flex-row text-center gap-3 justify-start w-full items-center overflow-x-auto p-2 border rounded-md max-h-96"
				>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/DaRes1TR3XQ?si=RWy-Cb6iE4mmn310"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/YQfRVo5UwOM?si=M20fwJXx21jM-t9f"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/FMfLfYus6Yc?si=N9P9ay0AvB8f3iSG"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
				</div>
			</div>
			<div class="grid grid-cols-1 gap-3 md:grid-rows-1 md:grid-cols-7">
				<div
					id="youtubeChannel"
					class="border p-2 rounded-md flex justify-center items-center hover:bg-black/30 group"
				>
					<a
						href="https://www.youtube.com/c/DagerMusic"
						class="space-y-3 flex flex-col text-center w-full justify-center items-center rounded-md"
						rel="noopener noreferrer"
						target="_blank"
					>
						<h3 class="font-bold">YouTube</h3>
						<img
							src="assets/dagermusic.jpg"
							alt=""
							srcset=""
							class="rounded-full w-20 h-20"
						/>
						<h3 class="font-bold">@DagerMusic</h3>
						<Youtube
							className="absolute w-14 hidden group-hover:block text-red-500/50"
						/>
					</a>
				</div>
				<div
					id="youtubeVideos"
					class="md:col-span-6 flex flex-col md:flex-row text-center gap-3 justify-start w-full items-center overflow-x-auto p-2 border rounded-md max-h-96"
				>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/XExH87j7lqU?si=YZzN6ak6Ecj6bs94"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/pv6Z6omFeqo?si=lbLIqnu-dG21PstJ"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
					<div>
						<div>
							<iframe
								width="384"
								height="216"
								src="https://www.youtube.com/embed/Xg3YlX7E-sw?si=k4vKs9GgPoTPbUCP"
								title="YouTube video player"
								frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
								referrerpolicy="strict-origin-when-cross-origin"
								allowfullscreen></iframe>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
	<footer class="flex justify-center">
		<p>&copy; 2024 Dot Dager</p>
	</footer>
</Layout>
<style>
	#home {
		mask-image: linear-gradient(black 90%, transparent 100%);
	}
	#bg-front {
		mask-image: linear-gradient(black 90%, transparent 100%);
	}
</style>
<script>
	// Funciona
	const bgm = new Audio("assets/audio/bgm.m4a");

	const context = new AudioContext();
	const analyser = context.createAnalyser();
	const source = context.createMediaElementSource(bgm);
	const bgCut = document.getElementById("bgcut") as HTMLDivElement;
	const playAudio = document.getElementById("playAudio") as HTMLButtonElement;

	source.connect(analyser);
	analyser.connect(context.destination);
	analyser.fftSize = 256;

	const dataArray = new Uint8Array(analyser.frequencyBinCount);

	function animate() {
		analyser.getByteFrequencyData(dataArray);
		const average = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;
		const brightness = Math.min(average / 128 + 0.5, 1.5); // Normaliza brillo
		bgCut.style.backdropFilter = `brightness(${brightness})`;

		requestAnimationFrame(animate);
	}

	playAudio.addEventListener("click", (e) => {
		bgm.volume = 0.1;
		playAudio.children[0].classList.toggle("hidden");
		playAudio.classList.toggle("animate-pulse");
		playAudio.children[1].classList.toggle("hidden");
		bgm.paused ? bgm.play() : bgm.pause();
	});

	bgm.addEventListener("play", () => {
		context.resume().then(animate);
	});
</script>
